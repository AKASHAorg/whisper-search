{"version":3,"sources":["../../src/indexModel.js"],"names":["db","process","env","SEARCH_DB_PATH","__dirname","options","indexPath","getIndex","cb","err","index","consume","source","pipe","defaultPipeline","add","on","d","console","log"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEO,IAAMA,kBAAMC,QAAQC,GAAR,CAAYC,cAAb,GAA+BF,QAAQC,GAAR,CAAYC,cAA3C,GAA4D,gBAAKC,SAAL,EAAgB,IAAhB,CAAvE;AACP,IAAMC,UAAU,EAAEC,WAAWN,EAAb,EAAhB;;AAEO,IAAMO,8BAAW,SAAXA,QAAW,CAACC,EAAD,EAAQ;AAC9B,6BAAYH,OAAZ,EAAqB,UAAUI,GAAV,EAAeC,KAAf,EAAsB;AACzCF,OAAG,EAAH,EAAOE,KAAP;AACD,GAFD;AAGD,CAJM;;AAOA,IAAMC,4BAAU,SAAVA,OAAU,CAACC,MAAD,EAASF,KAAT,EAAmB;AACxCE,SACGC,IADH,CACQH,MAAMI,eAAN,EADR,EAEGD,IAFH,CAEQH,MAAMK,GAAN,EAFR,EAGGC,EAHH,CAGM,MAHN,EAGc,UAAUC,CAAV,EAAa;AACvB;AACD,GALH,EAMGD,EANH,CAMM,KANN,EAMa,YAAY;AACrBE,YAAQC,GAAR,CAAY,eAAZ;AACD,GARH;AASD,CAVM","file":"indexModel.js","sourcesContent":["import { join } from 'path';\nimport SearchIndex from 'search-index';\n\nexport const db = (process.env.SEARCH_DB_PATH) ? process.env.SEARCH_DB_PATH : join(__dirname, 'db');\nconst options = { indexPath: db };\n\nexport const getIndex = (cb) => {\n  SearchIndex(options, function (err, index) {\n    cb('', index);\n  });\n};\n\n\nexport const consume = (source, index) => {\n  source\n    .pipe(index.defaultPipeline())\n    .pipe(index.add())\n    .on('data', function (d) {\n      // nothing :D\n    })\n    .on('end', function () {\n      console.log('completed add');\n    })\n};\n\n"]}